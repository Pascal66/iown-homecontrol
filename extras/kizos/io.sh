#!/bin/sh
PORT=/dev/ttyS1
RED='\033[0;41;30m'
STD='\033[0;0;39m'

pause(){
  read -p "Press [Enter] key to continue..." fackEnterKey
}

send(){
  echo "Sending $1 ..."
  echo -ne $1 > $PORT
  pause
}

show_menus() {
  clear
  echo "~~~~~~~~~~~~~~~~~~~"
  echo " io Tests Terminal "
  echo "~~~~~~~~~~~~~~~~~~~"
  echo "1.  Get SW version"
  echo "2.  Get HW version"
  echo "3.  CKS error"
  echo "4.  CMD unknown"
  echo "5.  RFT OFF"
  echo "6.  RFT TX 0 Channel 1"
  echo "7.  RFT TX 0 Channel 2"
  echo "8.  RFT TX 0 Channel 3"
  echo "9.  RFT TX 1 Channel 1"
  echo "10. RFT TX 1 Channel 2"
  echo "11. RFT TX 1 Channel 3"
  echo "12. RFT TX preamble Channel 1"
  echo "13. RFT TX preamble Channel 2"
  echo "14. RFT TX preamble Channel 3"
  echo "15. RFT TX 2 Channel 1 Timed 1s/1s"
  echo "16. RFT TX 2 Channel 2 Timed 1s/1s"
  echo "17. RFT TX 2 Channel 3 Timed 1s/1s"
  echo "18. RFT RX LBT Channel 1"
  echo "19. RFT RX LBT Channel 2"
  echo "20. RFT RX LBT Channel 3"
  echo "21. RFT RX Data Channel 1"
  echo "22. RFT RX Data Channel 2"
  echo "23. RFT RX Data Channel 3"
  echo "24. RFT CAL Read"
  echo "25. RFT CAL Write 0E5EC4 0ECD0B 0F5AD4"
  echo "q. Exit"
}

read_options(){
  local choice
  read -p "Enter choice [ q / 1 - 25]" choice
  case $choice in
     1) send "\x02\x47\x53\x57\x03\x34\x32" ;;
     2) send "\x02\x47\x48\x57\x03\x35\x39" ;;
     3) send "\x02\x47\x53\x57\x03\x34\x31" ;;
     4) send "\x02\x57\x53\x57\x03\x35\x32" ;;
     5) send "\x02\x52\x46\x54\x09\x4F\x46\x46\x03\x30\x37" ;;
     6) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x30\x09\x43\x3D\x30\x03\x30\x45" ;;
     7) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x30\x09\x43\x3D\x31\x03\x30\x46" ;;
     8) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x30\x09\x43\x3D\x32\x03\x30\x43" ;;
     9) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x31\x09\x43\x3D\x30\x03\x30\x46" ;;
    10) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x31\x09\x43\x3D\x31\x03\x30\x45" ;;
    11) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x31\x09\x43\x3D\x32\x03\x30\x44" ;;
    12) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x32\x09\x43\x3D\x30\x03\x30\x43" ;;
    13) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x32\x09\x43\x3D\x31\x03\x30\x44" ;;
    14) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x32\x09\x43\x3D\x32\x03\x30\x45" ;;
    15) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x32\x09\x43\x3D\x30\x09\x54\x03\x35\x31" ;;
    16) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x32\x09\x43\x3D\x31\x09\x54\x03\x35\x30" ;;
    17) send "\x02\x52\x46\x54\x09\x54\x58\x3D\x32\x09\x43\x3D\x32\x09\x54\x03\x35\x33" ;;
    18) send "\x02\x52\x46\x54\x09\x52\x58\x3D\x30\x09\x43\x3D\x30\x03\x30\x38" ;;
    19) send "\x02\x52\x46\x54\x09\x52\x58\x3D\x30\x09\x43\x3D\x31\x03\x30\x39" ;;
    20) send "\x02\x52\x46\x54\x09\x52\x58\x3D\x30\x09\x43\x3D\x32\x03\x30\x41" ;;
    21) send "\x02\x52\x46\x54\x09\x52\x58\x3D\x31\x09\x43\x3D\x30\x03\x30\x39" ;;
    22) send "\x02\x52\x46\x54\x09\x52\x58\x3D\x31\x09\x43\x3D\x31\x03\x30\x38" ;;
    23) send "\x02\x52\x46\x54\x09\x52\x58\x3D\x31\x09\x43\x3D\x32\x03\x30\x42" ;;
    24) send "\x02\x52\x46\x54\x09\x43\x41\x4C\x09\x52\x44\x03\x31\x39" ;;
    25) send "\x02\x52\x46\x54\x09\x43\x41\x4C\x09\x57\x52\x3D\x30\x45\x35\x45\x43\x34\x30\x45\x43\x44\x30\x42\x30\x46\x35\x41\x44\x34\x03\x33\x37" ;;
    q) exit 0;;
    *) echo -e "${RED}Wrong choice...${STD}" && sleep 1
  esac
}

trap '' SIGINT SIGQUIT SIGTSTP

while true
do
	show_menus
	read_options
done
